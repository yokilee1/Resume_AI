spring.application.name=resumeAi
spring.datasource.url=jdbc:mysql://localhost:3306/resume_ai?useSSL=false&serverTimezone=Asia/Shanghai
spring.datasource.username=root
spring.datasource.password=0464123491
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

spring.jackson.property-naming-strategy=SNAKE_CASE
server.port=${PORT:8080}
# 开发环境前端来源（用于自定义 CORS）
cors.allowed-origins=${CORS_ALLOWED_ORIGINS:http://localhost:3000,http://127.0.0.1:3000,http://localhost:5173}
# ?? Vercel ? Cloudflare ??
#cors.allowed-origins=https://resumeai-murex.vercel.app,http://localhost:5173,https://worldcat-fly-incident-carrier.trycloudflare.com
jwt.secret=${JWT_SECRET:change_me}
jwt.access-token-ttl-minutes=${JWT_ACCESS_TTL:30}
jwt.refresh-token-ttl-days=${JWT_REFRESH_TTL:7}

springdoc.api-docs.enabled=true
springdoc.swagger-ui.enabled=true

# 限定 Springdoc 扫描范围与匹配路径，避免扫描到无关 Bean 导致生成失败
springdoc.packagesToScan=com.resume.resumeai.api
springdoc.pathsToMatch=/api/**

# 提升容错：忽略坏的引用定义，用泛型响应覆盖默认响应
springdoc.remove-broken-reference-definitions=true
springdoc.override-with-generic-response=true

# DashScope 兼容模式（通过 Spring AI OpenAI Starter 调用百炼通义千问）
spring.ai.openai.api-key=${DASHSCOPE_API_KEY:${OPENAI_API_KEY:${SPRING_AI_OPENAI_API_KEY}}}
# 注意：Spring AI 会在内部追加路径，base-url 仅设置主机
spring.ai.openai.base-url=${DASHSCOPE_API_BASE_URL:https://dashscope.aliyuncs.com}
# 指定兼容模式的 chat completions 路径，避免出现双重 /v1 导致 404
spring.ai.openai.chat.completions-path=/compatible-mode/v1/chat/completions
spring.ai.openai.chat.options.model=${QWEN_MODEL:qwen-plus}
spring.ai.openai.chat.options.temperature=${QWEN_TEMPERATURE:0.3}

# Actuator & Prometheus
management.endpoints.web.exposure.include=health,prometheus,info
management.endpoint.health.probes.enabled=true
management.health.livenessstate.enabled=true
management.health.readinessstate.enabled=true

# 调试日志
logging.level.org.springframework.ai=DEBUG
debug=true

# 禁用阿里云 DashScope 的自动配置（若存在该依赖则不会强制启用）
spring.autoconfigure.exclude=com.alibaba.cloud.ai.autoconfigure.dashscope.DashScopeAgentAutoConfiguration
